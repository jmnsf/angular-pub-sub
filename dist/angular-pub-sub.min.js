/**
 * An Angular module that implements a Publish Subscribe service with support for message history.
 * @version v1.0.0 - 2015-04-02
 * @link https://github.com/jmnsf/angular-pub-sub
 * @author jmnsf <jmnsferreira@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */!function(a,b,c){"use strict";var d=b.module("PubSubModule",[]);d.provider("pubSub",function(){this.maxHistory=10,this.setMaxHistory=function(a){return this.maxHistory=a,this},this.$get=function(){var a=this,b={},d=0,e=function(a,b){var c=k();return a[c]=b,h(a,c)},f=function(b,c){a.maxHistory<=0||(b.history.push(c),b.history.length>a.maxHistory&&b.history.shift())},g=function(){var a={};return Object.defineProperty(a,"history",{value:[],enumerable:!1}),a},h=function(a,b){return function(){delete a[b]}},i=function(a,b){for(var c=[],d=b;d<a.length;d++)c.push(a[d]);return c},j=function(a){return b[a]===c&&(b[a]=g()),b[a]},k=function(){return d+=1},l=function(a){var b=i(arguments,1);a=j(a),m(a,b),f(a,b)},m=function(a,b){for(var d=Object.keys(a),e=0;e<d.length;e++)a[d[e]].apply(c,b)},n=function(a,b,d){var e=a.history,f=0;d!==c&&(f=Math.max(f,e.length-d));for(var g=f;g<e.length;g++)b.apply(null,e[g])},o=function(a,b,c,d){var f;return a=j(a),f=e(a,b),c===!0&&n(a,b,d),f};return{publish:l,subscribe:o}}})}(window,window.angular);